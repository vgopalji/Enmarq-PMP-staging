@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}


@model List<CareStream.Models.DealerModel>

@{
    ViewData["Title"] = "Dealer";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>

    </style>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Carestream</title>
    <!-- Bootstrap code & custom styles-->
    <link href="~/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/css/dataTables.bootstrap4.min.css" rel="stylesheet" />
    <link href="~/style.css" rel="stylesheet" />
    <link href="~/css/offset-wizard.css" rel="stylesheet" />
    <link href="~/css/toastr.min.css" rel="stylesheet" />


    <!-- Fontawesome -->
    <script src="https://kit.fontawesome.com/e508532408.js" crossorigin="anonymous"></script>
</head>

<div id="page-content-wrapper">

    <form>
        <div id="lstgroup">

            <div class="container no-gutter border-bottom mb-4">
                <div class="row">
                    <nav class="navbar navbar-expand-lg navbar-light pt-0 pb-0">
                        <a class="navbar-brand" href="#"></a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
                                aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarNavDropdown">
                            <ul class="nav-tabs navbar-nav">
                                <li class="nav-item active col-4">
                                    <a class="nav-link font-weight-bold" asp-controller="Dealer" asp-action="Create" id="creategroupclick" onclick="blockUi();">
                                        <i class="fa fa-plus" aria-hidden="true"></i>  Create Dealer
                                        <span class="sr-only">(current)</span>
                                    </a>
                                </li>
                                <li class="nav-item active col-3">
                                    <a class="nav-link pr-2" asp-controller="Dealer" asp-action="Upload"
                                       ><i class="fa fa-cloud-upload pr-2" onclick="blockUi();"></i>Bulk Create</a>
                                </li>
                                <li class="nav-item col-3">
                                    @*<a class="nav-link font-weight-bold" href="#" id="deletegroup">
                <i class="fa fa-trash" aria-hidden="true"></i> Delete
            </a>*@

                                    <button type="button" class="nav-link font-weight-bold" style="cursor:pointer" value="Delete" onclick="confirmDelete(true)">
                                        <i class="fa fa-trash" aria-hidden="true"></i> Delete
                                    </button>

                                </li>
                                <li class="nav-item col-3">
                                    <a class="nav-link font-weight-bold" href="#" id="refresh">
                                        <i class="fa fa-upload" aria-hidden="true"></i> Refresh
                                    </a>
                                </li>
                                <li class="nav-item col-5">
                                    <a class="nav-link font-weight-bold" href="#" id="downloadgroups">
                                        <i class="fa fa-download" aria-hidden="true"></i> Download
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>

            @Html.AntiForgeryToken()
            <div class="container">
                <div class="row ">
                    <table id="example" class="table table-striped border" style="width:100%">
                        <thead>
                            <tr>
                                <th><input type="checkbox" id="selectedID1" /> </th>
                                <th>Dealer Name</th>
                                <th>Description</th>
                                <th>SAPID</th>
                                @*<th>Object ID</th>
                                    <th>Group Type</th>*@
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td style="width:5%">
                                        <input type="checkbox" name="selectedList" id="selectedGroup" value="@item.DealerId" />
                                    </td>
                                    <td style="width:20%">
                                        @*@Html.DisplayFor(modelItem => item.DealerName)*@
                                        <a asp-controller="Dealer" asp-action="Details" asp-route-id="@item.DealerId" onclick="blockUi();">  @Html.DisplayFor(modelItem => item.DealerName)  </a>
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.DealerDescription)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.SAPID)
                                    </td>

                                </tr>
                            }

                        </tbody>
                    </table>

                </div>
            </div>

        </div>

    </form>
</div>
<script type="text/javascript">

    $(document).ready(function () {

        $('#example').DataTable({
            "language": {
                "search": "",
                "searchPlaceholder": "Search Dealer Name",
            },
            "bLengthChange": false,
            "fixedHeader": {
                "footer": false
            },
            //"dom": "<'#searchid'f>trip"
        });

        //$(window).on("load", function () {
        //    $("#searchid :input").addClass('empty');
        //});

        //$(document).on('keyup', '#searchid :input', function () {
        //    var input = $("#searchid :input");
        //    if (input.val().length === 0) {
        //        input.removeClass('no-icon');
        //        input.addClass('empty');

        //    } else {
        //        input.removeClass('empty');
        //        input.addClass('no-icon')
        //    }
        //});

        $('#refresh').on('click', function () {
            window.location.reload();
        });

        unBlockUi();
    });

    function confirmDelete(isDelete) {

        $('#Controller').val('Dealer');
        $('#Action').val('DealerDelete');

        if (isDelete) {
            $('#confirmDialog').show('fade');
        } else {
            $('#confirmDialog').hide();
            unBlockUi();
        }

    }


</script>